---
phase: 01-foundation
type: execute
---

<objective>
Set up Vite + React + TypeScript project with Tailwind CSS v4 and PocketBase SDK integration.

Purpose: Establish the core development environment with modern tooling, dark mode support, and backend connectivity foundation. This is the groundwork all features depend on.
Output: Working Vite dev server with hot reload, Tailwind v4 styling with dark mode, PocketBase client singleton ready for use.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite + React + TypeScript project</name>
  <files>package.json, vite.config.ts, tsconfig.json, tsconfig.app.json, tsconfig.node.json, index.html, src/main.tsx, src/App.tsx, src/vite-env.d.ts</files>
  <action>
Initialize Vite project with React + TypeScript template in current directory:
```bash
npm create vite@latest . -- --template react-ts
npm install
```

This creates:
- package.json with Vite, React, TypeScript dependencies
- vite.config.ts with React plugin
- tsconfig files for app and Node environments
- src/main.tsx entry point
- src/App.tsx root component
- index.html

Configure Vite path alias for @/ imports:
- Import path from 'path'
- Add resolve.alias: { '@': path.resolve(__dirname, './src') }
- This enables imports like '@/components' instead of '../../../components'

Verify Node version meets requirements (Vite 5+ needs Node 20.19+ or 22.12+).
  </action>
  <verify>
- npm run dev starts successfully on port 5173
- Browser shows "Vite + React" welcome message
- Hot Module Replacement works: edit src/App.tsx, save, see updates without full reload
  </verify>
  <done>
Vite dev server runs on http://localhost:5173 with HMR working
  </done>
</task>

<task type="auto">
  <name>Task 2: Install and configure Tailwind CSS v4 with dark mode</name>
  <files>package.json, src/index.css, postcss.config.js</files>
  <action>
Install Tailwind CSS v4 and dependencies:
```bash
npm install -D tailwindcss@next postcss autoprefixer
```

Configure Tailwind v4 with CSS-first approach (NOT tailwind.config.js - that's v3 pattern):
1. Create postcss.config.js with tailwindcss and autoprefixer plugins
2. In src/index.css, replace contents with:
```css
@import "tailwindcss";

@theme {
  --font-sans: system-ui, -apple-system, sans-serif;
  --color-primary: #3b82f6;
  --color-secondary: #8b5cf6;
  --background: #ffffff;
  --foreground: #0f172a;
  --color-dark-bg: #0f172a;
  --color-dark-fg: #f8fafc;
}

@custom-variant dark (&:where(.dark, .dark *));
```

Note: Tailwind v4 uses CSS variables and @theme, not JavaScript config. The @custom-variant enables class-based dark mode.

Set up dark mode without flicker:
1. Create script to check localStorage BEFORE React loads
2. In index.html <head>, add:
```html
<script>
  if (localStorage.getItem('darkMode') === 'true') {
    document.documentElement.classList.add('dark');
  }
</script>
```

This prevents "flash of wrong theme" on page load.

Update App.tsx to use Tailwind classes:
- Add div with min-h-screen, bg-background, text-foreground
- Add dark mode toggle button that toggles 'dark' class and saves to localStorage
- Verify dark mode works without page reload
  </action>
  <verify>
- npm run build succeeds with optimized CSS
- Page loads with correct theme (no flash)
- Dark mode toggle switches between light/dark instantly
- DevTools shows .dark class on html element when active
- Tailwind classes like 'bg-primary', 'text-secondary' work in both modes
  </verify>
  <done>
Tailwind v4 configured with CSS-first approach, dark mode working without flicker
  </done>
</task>

<task type="auto">
  <name>Task 3: Set up PocketBase SDK singleton and directory structure</name>
  <files>package.json, src/lib/pocketbase.ts, src/lib/utils.ts, src/components/ui/.gitkeep, src/components/layout/.gitkeep, src/hooks/.gitkeep</files>
  <action>
Install PocketBase JavaScript SDK:
```bash
npm install pocketbase
```

Create recommended directory structure:
```
src/
├── components/
│   ├── ui/         # Basic UI components
│   └── layout/     # Layout components
├── lib/            # External library configs
├── hooks/          # Custom React hooks
├── App.tsx
└── main.tsx
```

Create src/lib/pocketbase.ts with singleton pattern (CRITICAL - multiple instances cause auth issues):
```typescript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

export default pb;
```

Note: Use http://127.0.0.1:8090 NOT localhost to avoid CORS issues.

Create src/lib/utils.ts with helper functions:
```typescript
export function cn(...classes: string[]) {
  return classes.filter(Boolean).join(' ');
}
```

Add .gitkeep files to empty directories so git tracks them.

Note: PocketBase backend will be set up in later phases. For now, just having the client singleton ready is sufficient. If you try to use it now, it will fail to connect (expected - backend not running yet).
  </action>
  <verify>
- src/lib/pocketbase.ts exports default PocketBase instance
- import pb from '@/lib/pocketbase' works (path alias functional)
- All directories exist with .gitkeep files
- TypeScript compiles without errors
- No unused imports or TypeScript warnings
  </verify>
  <done>
Directory structure created, PocketBase singleton ready for backend integration
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run dev` starts server successfully
- [ ] `npm run build` completes without errors
- [ ] No TypeScript errors in IDE or terminal
- [ ] Tailwind classes render correctly (check devtools)
- [ ] Dark mode toggle works and persists across reloads
- [ ] Path aliases (@/ imports) work correctly
- [ ] Directory structure matches research recommendations
- [ ] PocketBase client can be imported without errors
</verification>

<success_criteria>

- Vite + React + TypeScript project initialized and running
- Tailwind CSS v4 configured with CSS-first approach (not tailwind.config.js)
- Dark mode implemented with class strategy, no flicker on load
- PocketBase SDK installed with singleton pattern in src/lib/pocketbase.ts
- Project structure follows best practices (components/, lib/, hooks/)
- Path aliases configured for @/ imports
- Development server with HMR working
- No build errors or TypeScript warnings
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Foundation Setup Summary

**Vite + React + Tailwind v4 + PocketBase SDK foundation established**

## Accomplishments

- Vite + React + TypeScript project initialized with HMR
- Tailwind CSS v4 configured with CSS-first approach and dark mode
- PocketBase SDK singleton ready for backend integration
- Project structure following best practices

## Files Created/Modified

- package.json - Vite, React, Tailwind v4, PocketBase SDK dependencies
- vite.config.ts - React plugin with @/ path alias
- tsconfig*.json - TypeScript configuration
- src/index.css - Tailwind v4 with @theme and dark mode variant
- src/lib/pocketbase.ts - PocketBase singleton client
- src/lib/utils.ts - Helper utilities
- src/components/, src/hooks/ directories with .gitkeep files
- index.html - Dark mode initialization script

## Decisions Made

- Used Tailwind v4 CSS-first config instead of v3 JavaScript config (10x faster builds)
- Class-based dark mode strategy (manual control, not system-only)
- PocketBase singleton pattern (prevents auth state issues)
- Path alias @/ for cleaner imports
- http://127.0.0.1:8090 for PocketBase (avoids CORS)

## Issues Encountered

None

## Next Step

Ready for Phase 2: Qwen Integration
</output>
